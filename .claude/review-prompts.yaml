# Claude Multi-Perspective Code Review 설정
# 위치: .claude/review-prompts.yaml
#
# 각 관점(perspective)별로 확인 항목만 정의합니다.
# 공통 프롬프트(헤더, 보고서 형식, VERDICT 요청)는 스크립트에서 자동 주입됩니다.
#
# 리뷰 결과:
#   .claude-review/reports/{name}.md - 상세 보고서
#   .claude-review/results/{name}.json - 결과 (PASS/FAIL)

perspectives:
  # ============================================
  # Safety (Security + Type Safety + Thread Safety)
  # ============================================
  - name: safety
    prompt: |
      ## 확인 항목

      ### Security
      - pickle 역직렬화 후 타입 검증 누락
      - 허용되지 않은 예외 타입 re-raise
      - 하드코딩된 시크릿, API 키

      ### Type Safety
      - Generic[T] 타입 파라미터 불일치
      - ABC 추상 메서드 시그니처 위반
      - isinstance() 검증 누락
      - cast() 남용 (타입 검증 없이 사용)

      ### Thread Safety
      - Lock 없이 공유 자원 접근
      - Race condition 가능성
      - 데드락 위험 (중첩 Lock)

  # ============================================
  # API Design (Compatibility + SOLID)
  # ============================================
  - name: api-design
    prompt: |
      ## 확인 항목

      ### API Compatibility
      - 기존 public 메서드 시그니처 변경
      - __all__ export 누락
      - 하위 호환성 깨는 변경

      ### SOLID Principles
      - ISP 위반: 사용하지 않는 메서드 강제 구현
      - LSP 위반: 서브클래스가 부모 계약 위반
      - DIP 위반: 구현체 직접 의존 (ports 우회)

      ### Interface Design
      - no-op 메서드 (빈 구현)
      - 메서드 네이밍 일관성
      - docstring 누락 또는 불일치
